<!DOCTYPE html><html><head><meta charset="utf-8"><title>NSS CERTVerify Log - Mozilla | MDN</title></head><body><main><article class="main-page-content" lang="en-US"><h1>NSS CERTVerify Log</h1><h3 id="certverifylog"><a href="#certverifylog" title="Permalink to CERTVerifyLog">CERTVerifyLog</a></h3><div><p>All the NSS verify functions except, the *VerifyNow() functions, take a parameter called 'CERTVerifyLog'. If you supply the log parameter, NSS will continue chain validation after each error . The log tells you what the problem was with the chain and what certificate in the chain failed.</p>
<p>To create a log:</p>
<pre class="eval notranslate">#include "secport.h"
#include "certt.h"

CERTVerifyLog *log;

arena = PORT_NewArena(512);
log =  PORT_ArenaZNew(arena,log);
log-&gt;arena = arena;
</pre>
<p>You can then pass this log into your favorite cert verify function. On return:</p>
<ul> <li>log-&gt;count is the number of entries.</li> <li>log-&gt;head is the first entry;</li> <li>log-&gt;tail is the last entry.</li>
</ul>
<p>Each entry is a CERTVerifyLogNode. Defined in certt.h:</p>
<pre class="eval notranslate">/*
 * This structure is used to keep a log of errors when verifying
 * a cert chain.  This allows multiple errors to be reported all at
 * once.
 */
struct CERTVerifyLogNodeStr {
  CERTCertificate *cert;      /* what cert had the error */
  long error;                 /* what error was it? */
  unsigned int depth;         /* how far up the chain are we */
  void *arg;                  /* error specific argument */
  struct CERTVerifyLogNodeStr *next; /* next in the list */
  struct CERTVerifyLogNodeStr *prev; /* next in the list */
};
</pre>
<p>The list is a doubly linked NULL terminated list sorted from low to high based on depth into the cert chain. When you are through, you will need to walk the list and free all the cert entries, then free the arena.</p></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h4>Found a problem with this page?</h4><ul><li><a href="https://github.com/mdn/content/blob/main/files/en-us/mozilla/projects/nss/certverify_log/index.html" title="Folder: en-us/mozilla/projects/nss/certverify_log (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FProjects%2FNSS%2FCERTVerify_Log%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fmozilla%2Fprojects%2Fnss%2Fcertverify_log%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FProjects%2FNSS%2FCERTVerify_Log%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fmozilla%2Fprojects%2Fnss%2Fcertverify_log%2Findex.html%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Fc1713af47b73d01fcb0d303d2eb8ec992da2fd1f%0A*+Document+last+modified%3A+2020-12-28T11%3A20%3A12.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22NSS+CERTVerify+Log%22%3A+%28short+summary+here+please%29&amp;labels=Content%3AOther%2Cneeds-triage" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2020-12-28T11:20:12.000Z">Dec 28, 2020</time>,<!-- --> <a href="/en-US/docs/Mozilla/Projects/NSS/CERTVerify_Log/contributors.txt">by MDN contributors</a></p></div></aside></main></body></html>